

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Node-RED &mdash; BPA/OpenIAP Docs 1.0.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
        <script src="static/jquery.js"></script>
        <script src="static/underscore.js"></script>
        <script src="static/doctools.js"></script>
        <script src="static/language_data.js"></script>
    
    <script type="text/javascript" src="static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="static/styles.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Appendix A" href="appendix_a.html" />
    <link rel="prev" title="3. OpenRPA" href="openrpa.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BPA/OpenIAP Docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="rpa.html">1. <strong>Introduction to RPA</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="openflow.html">2. <strong>OpenFlow</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="openrpa.html">3. <strong>OpenRPA</strong></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. <strong>Node-RED</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-node-red">4.1. <strong>What is Node-RED?</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">4.1.1. What is Node-RED?</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-mqtt">4.1.1.1. What is MQTT?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-for-the-first-time">4.2. <strong>Accessing for the first time</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#node-red-editor">4.3. <strong>Node-RED Editor</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#header">4.3.1. Header</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#deploy-button">4.3.1.1. Deploy Button</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-menu">4.3.1.2. Main Menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-menu">4.3.1.3. User Menu</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#palette">4.3.2. Palette</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workspace">4.3.3. Workspace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#view-tools">4.3.3.1. View Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="#customising-the-view">4.3.3.2. Customising the view</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sidebar">4.3.4. Sidebar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flow-subflows-nodes-and-messages">4.4. <strong>Flow, Subflows, Nodes and Messages</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="#openflow-and-openrpa-nodes">4.5. <strong>OpenFlow and OpenRPA Nodes</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rpa-detector">4.5.1. RPA Detector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rpa-workflow">4.5.2. RPA Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smtpserver-in">4.5.3. SMTPServer In</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-in">4.5.4. Workflow In</a></li>
<li class="toctree-l3"><a class="reference internal" href="#workflow-out">4.5.5. Workflow Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flow-examples">4.6. <strong>Flow Examples</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dummy-integration-openrpa-openflow-nodered">4.6.1. Dummy Integration OpenRPA-OpenFlow-NodeRED</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-openflow-forms">4.6.2. Using OpenFlow Forms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ai-image-recognition">4.6.3. AI Image Recognition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#email-receive-send">4.6.4. Email Receive, Send</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#receive-e-mails">4.6.4.1. Receive e-mails</a></li>
<li class="toctree-l4"><a class="reference internal" href="#redirecting-e-mails">4.6.4.2. Redirecting e-mails</a></li>
<li class="toctree-l4"><a class="reference internal" href="#send-e-mails">4.6.4.3. Send e-mails</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-http-endpoint">4.6.5. Creating a HTTP endpoint</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-s-basic-strtucture">4.6.5.1. API’s basic strtucture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-database-and-adding-new-items-to-it">4.6.5.2. Creating a database and adding new items to it</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-a-full-list-of-items">4.6.5.3. Get a full list of items</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#excel-read">4.6.6. Excel Read</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongodb-entities">4.6.7. MongoDB Entities</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix_a.html">5. <strong>Appendix A</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix_b.html">6. <strong>Appendix B</strong></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">1. License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BPA/OpenIAP Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">4. </span><strong>Node-RED</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="node-red">
<h1><span class="section-number">4. </span><strong>Node-RED</strong><a class="headerlink" href="#node-red" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-node-red">
<h2><span class="section-number">4.1. </span><strong>What is Node-RED?</strong><a class="headerlink" href="#what-is-node-red" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><span class="section-number">4.1.1. </span>What is Node-RED?<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong>Node-RED</strong> is a programming tool used for linking all our tools together (<strong>OpenRPA</strong> and <strong>OpenFlow</strong>) as well as hardware devices, APIs and even online services in a new and interesting way. Think of it as a “backend” process flow designer &amp; integrator. The communication between <strong>Node-RED</strong> and <strong>OON stack</strong> is done through MQTT protocol (powered by RabbitMQ).</p>
<p>It provides an in-browser editor where you can connect flows using any nodes available. Each node represents a step that when wired together forms a meaningful task. It also follows a common pattern: input, processing and output. It is important to note that <strong>Node-RED</strong> functions like a middleware to an information processing system. It simply connects the inputs to the workflows and allows them to process it.</p>
<div class="section" id="what-is-mqtt">
<h4><span class="section-number">4.1.1.1. </span>What is MQTT?<a class="headerlink" href="#what-is-mqtt" title="Permalink to this headline">¶</a></h4>
<p>MQTT stands for Message Queuing Telemetry Transport. It is a publish/subscribe, extremely simple and lightweight messaging protocol, designed for constrained devices with low-bandwidth, high-latency or unreliable networks. The design principle is to minimise network bandwidth and device resource requirements while attempting to ensure reliability and assurance of delivery. These principles in turn make the protocol ideal for the emerging “machine-to-machine” (M2M) or “Internet of Things” world of connected devices, and for mobile applications where bandwidth and battery power are limited.</p>
</div>
</div>
</div>
<div class="section" id="accessing-for-the-first-time">
<h2><span class="section-number">4.2. </span><strong>Accessing for the first time</strong><a class="headerlink" href="#accessing-for-the-first-time" title="Permalink to this headline">¶</a></h2>
<p>To access Node-RED, simply use a browser and go to your <strong>Node-RED</strong> environment URL. If running local, default is <a class="reference external" href="http://localhost.openrpa.dk:1880">http://localhost.openrpa.dk:1880</a>. If you do now own an <strong>OpenFlow</strong>/<strong>Node-RED</strong> of your own, feel free to create a free (and temporary) <strong>Node-RED</strong> demo using OpenIAP platform.</p>
<p>Go to <strong>OpenIAP</strong> demo enviroment, which can be found at <a class="reference external" href="https://app.openiap.io">https://app.openiap.io</a>.
Access it using your <strong>OpenFlow</strong> credentials. If this is your very fist login any credentials will do, as you user will be then created with the same credentials you have provided. Please take notes of your user an password!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your <strong>NodeRED</strong> free demo enviroment URL is created based off your <strong>OpenFlow</strong> username, hence please do not create an username with improper characters for a URL (such as _, #, &#64;, $, etc), otherwise it will not work.</p>
</div>
<p>Once there, look for the NodeRED tab on the upper menu and click it. Then, proceed by clicking the button <code class="docutils literal notranslate"><span class="pre">Created</span> <span class="pre">NodeRED</span></code>.</p>
<div class="figure align-center">
<img alt="images/nodered_create_nodered_instance.png" src="images/nodered_create_nodered_instance.png" />
</div>
<p>If everything goes right, a similar output as from the next image will be shown. Your demo enviroment is ready to use and is accessible at <code class="docutils literal notranslate"><span class="pre">https://{YOUR-OPENFLOW-USERNAME}.app.openiap.io/</span></code>. In the image example next, the username was <code class="docutils literal notranslate"><span class="pre">doc-johnny</span></code>.</p>
<div class="figure align-center">
<img alt="images/nodered_create_nodered_instance_success.png" src="images/nodered_create_nodered_instance_success.png" />
</div>
<p>Access the desired <strong>Node-RED</strong> URL. Once there, a button is shown with the text <code class="docutils literal notranslate"><span class="pre">Sign</span> <span class="pre">in</span> <span class="pre">with</span> <span class="pre">SAML</span></code>. When you click the button, Node-RED attempts to gather your currently (or cached) logged in <strong>OpenFlow</strong> authentication data and then logs in, to <strong>Node-RED</strong>, with the same user.</p>
<div class="figure align-center" id="id4">
<img alt="images/nodered_sign_in_page.png" src="images/nodered_sign_in_page.png" />
<p class="caption"><span class="caption-text">Node-RED Sign In page.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="node-red-editor">
<h2><span class="section-number">4.3. </span><strong>Node-RED Editor</strong><a class="headerlink" href="#node-red-editor" title="Permalink to this headline">¶</a></h2>
<p>The editor window is where all the work gets done. It contains four components: header, palette, workspace and sidebar.</p>
<div class="figure align-center" id="id5">
<img alt="images/nodered_editor_default_components.png" src="images/nodered_editor_default_components.png" />
<p class="caption"><span class="caption-text">Node-RED Components.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="header">
<h3><span class="section-number">4.3.1. </span>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h3>
<p>The header contains the deploy button, main menu, and, if user authentication is activated, the user menu.</p>
<div class="section" id="deploy-button">
<h4><span class="section-number">4.3.1.1. </span>Deploy Button<a class="headerlink" href="#deploy-button" title="Permalink to this headline">¶</a></h4>
<p>The deploy button is used to deploy flows once you have finished creating or editing them. It is important to remark that you must always deploy a flow after editing it so the changes are applied.</p>
</div>
<div class="section" id="main-menu">
<h4><span class="section-number">4.3.1.2. </span>Main Menu<a class="headerlink" href="#main-menu" title="Permalink to this headline">¶</a></h4>
<p>The main menu contains many actions, such as hiding components, importing or exporting flows, searching for flows, actions (like add, rename and delete) flows and subflows, manage palettes, settings, keyboard shortcuts and a link to Node-RED’s webpage.</p>
</div>
<div class="section" id="user-menu">
<h4><span class="section-number">4.3.1.3. </span>User Menu<a class="headerlink" href="#user-menu" title="Permalink to this headline">¶</a></h4>
<p>The user menu, if the user is authenticated, shows your username and the option to logout.</p>
</div>
</div>
<div class="section" id="palette">
<h3><span class="section-number">4.3.2. </span>Palette<a class="headerlink" href="#palette" title="Permalink to this headline">¶</a></h3>
<p>The palette contains all of the nodes that are installed and available to use. These nodes are organized into a number of categories, which can be expanded or collapsed by clicking its header.</p>
<p>The entire palette can be hidden by clicking the toggle button that is shown when the mouse is over it or by pressing <strong>Ctrl+p</strong>.¹</p>
<p>¹ - <a class="reference external" href="https://nodered.org/docs/user-guide/editor/palette/">Palette</a> (<a class="reference external" href="https://nodered.org/docs/user-guide/editor/palette/">https://nodered.org/docs/user-guide/editor/palette/</a>)</p>
<div class="figure align-default" id="id6">
<a class="reference internal image-reference" href="images/nodered_editor_palette.png"><img alt="images/nodered_editor_palette.png" src="images/nodered_editor_palette.png" style="width: 180.0px; height: 760.0px;" /></a>
<p class="caption"><span class="caption-text">Node-RED Editor Palette.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="workspace">
<h3><span class="section-number">4.3.3. </span>Workspace<a class="headerlink" href="#workspace" title="Permalink to this headline">¶</a></h3>
<p>The main workspace is where flows are developed by dragging nodes from the palette and wiring them together.</p>
<p>The workspace has a row of tabs along the top; one for each flow and any subflows that have been opened. ²</p>
<div class="figure align-center" id="id7">
<img alt="images/nodered_editor_workspace.png" src="images/nodered_editor_workspace.png" />
<p class="caption"><span class="caption-text">Node-RED Editor Workspace.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="view-tools">
<h4><span class="section-number">4.3.3.1. </span>View Tools<a class="headerlink" href="#view-tools" title="Permalink to this headline">¶</a></h4>
<p>The footer of the workspace contains buttons to zoom in and out as well as to reset the default zoom level. It also contains a toggle button for the view navigator.</p>
<p>To zoom in, either click the <strong>+</strong> button inside the view navigator or press <strong>Ctrl+=</strong>.</p>
<p>To zoom out, either click the <strong>-</strong> button inside the view navigator or press <strong>Ctrl+-</strong>.</p>
<p>To reset the zoom, either click the <strong>O</strong> button inside the view navigator or press <strong>Ctrl+0</strong>.</p>
<p>The view navigator provides a scaled down view of the entire workspace, highlighting the area currently visible. That area can be dragged around the navigator to quickly jump to other parts of the workspace. It is also useful for finding nodes that have been <strong>lost</strong> to the further edges of the workspace.</p>
<div class="figure align-center" id="id8">
<img alt="images/node_red_workspace_navigator_active.png" src="images/node_red_workspace_navigator_active.png" />
<p class="caption"><span class="caption-text">Node-RED Editor Workspace Navigator Active.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="customising-the-view">
<h4><span class="section-number">4.3.3.2. </span>Customising the view<a class="headerlink" href="#customising-the-view" title="Permalink to this headline">¶</a></h4>
<p>The workspace view can be customised via the <strong>View</strong> tab of the User Settings dialog.</p>
<p>To activate the User Settings dialog, press <strong>Ctrl+,</strong>.</p>
<div class="figure align-center" id="id9">
<img alt="images/nodered_editor_user_settings_dialog.png" src="images/nodered_editor_user_settings_dialog.png" />
<p class="caption"><span class="caption-text">Node-RED Editor User Settings Dialog.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>² - <a class="reference external" href="https://nodered.org/docs/user-guide/editor/workspace/">Workspace</a> (<a class="reference external" href="https://nodered.org/docs/user-guide/editor/workspace/">https://nodered.org/docs/user-guide/editor/workspace/</a>)</p>
</div>
</div>
<div class="section" id="sidebar">
<h3><span class="section-number">4.3.4. </span>Sidebar<a class="headerlink" href="#sidebar" title="Permalink to this headline">¶</a></h3>
<p>The sidebar contains panels that provide a number of useful tools within the editor.³</p>
<ul>
<li><p><strong>Information</strong></p>
<blockquote>
<div><p>View information about nodes and their help info</p>
</div></blockquote>
</li>
<li><p><strong>Debug</strong></p>
<blockquote>
<div><p>View messages passed into debug nodes</p>
</div></blockquote>
</li>
<li><p><strong>Configuration Nodes</strong></p>
<blockquote>
<div><p>Manage configuration nodes</p>
</div></blockquote>
</li>
<li><p><strong>Context Data</strong></p>
<blockquote>
<div><p>View the contents of the context variables</p>
</div></blockquote>
</li>
</ul>
<div class="figure align-center" id="id10">
<img alt="images/nodered_editor_sidebar.png" src="images/nodered_editor_sidebar.png" />
<p class="caption"><span class="caption-text">Node-RED Editor Sidebar.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>Some nodes contribute their own sidebar panels, such as <a class="reference external" href="https://flows.nodered.org/node/node-red-dashboard/">node-red-dashboard</a> (<a class="reference external" href="https://flows.nodered.org/node/node-red-dashboard">https://flows.nodered.org/node/node-red-dashboard</a>).</p>
<p>The panels are opened by clicking their icon in the header of the sidebar, or by selecting them in the drop-down list shown.</p>
<p>The sidebar can be resized by dragging tis edge across the workspace.</p>
<p>If the edge is dragged close to the right-hand edge, the sidebar will be hidden. It can be shown again by selecting the <strong>Show sidebar</strong> option in the View menu, or using the <strong>Ctrl+Space</strong> shortcut.</p>
</div>
</div>
<div class="section" id="flow-subflows-nodes-and-messages">
<h2><span class="section-number">4.4. </span><strong>Flow, Subflows, Nodes and Messages</strong><a class="headerlink" href="#flow-subflows-nodes-and-messages" title="Permalink to this headline">¶</a></h2>
<p>This section is mostly based on <code class="docutils literal notranslate"><span class="pre">Node-RED</span></code>’s documentation. Please refer to <a class="reference external" href="https://nodered.org/docs/user-guide/editor">https://nodered.org/docs/user-guide/editor</a> for further details.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Flow</span></code> is a working space where <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> are organized. Each <code class="docutils literal notranslate"><span class="pre">Flow</span></code> is represented by a tab with its name; a description is provided in the <em>Information Sidebar</em>. All the <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> within a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> share the same <em>Flowscope Context</em>, that is, they all have access to the same context values.</p>
<p>New <code class="docutils literal notranslate"><span class="pre">Flows</span></code> are created by clicking the “plus” button in the top bar. In order to edit a <code class="docutils literal notranslate"><span class="pre">Flow</span></code>’s properties, users can double-click on its tab in the top bar. <code class="docutils literal notranslate"><span class="pre">Flows</span></code> can be disabled by clicking the toogle button at the bottom of the dialog box.</p>
<p><code class="docutils literal notranslate"><span class="pre">Subflows</span></code> are collections of <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> grouped within a single <code class="docutils literal notranslate"><span class="pre">Node</span></code>. The purpose is to reduce visual complexity of the <code class="docutils literal notranslate"><span class="pre">Flow</span></code> or to reuse these collections. The created <code class="docutils literal notranslate"><span class="pre">Subflows</span></code> become a new <code class="docutils literal notranslate"><span class="pre">Node</span></code> in the <em>Pallete</em>.</p>
<p>To create a blank <code class="docutils literal notranslate"><span class="pre">Subflow</span></code>, the user has to click on ‘Subflow -&gt; Create subflow’ option in the menu. Another option is to create a new <code class="docutils literal notranslate"><span class="pre">Subflow</span></code> out of existing <code class="docutils literal notranslate"><span class="pre">Nodes</span></code>. The user must select the <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> to be converted and click on ‘Subflow -&gt; Selection to Subflow’ option in the menu.</p>
<p><code class="docutils literal notranslate"><span class="pre">Nodes</span></code> are the visual representation of actions and can be chained together via wires, thus creating a flow. The wires connect to the <code class="docutils literal notranslate"><span class="pre">node</span></code>’s ports, that work as doors. Each <code class="docutils literal notranslate"><span class="pre">node</span></code> can have at most one input port and several output ports.</p>
<p>There are some icons that must be considered here. When there is a blue circle above a <code class="docutils literal notranslate"><span class="pre">node</span></code>, it means that it has undeployed changes. If there are any errors within a <code class="docutils literal notranslate"><span class="pre">node</span></code>, a red triangle will appear above it. When a <code class="docutils literal notranslate"><span class="pre">node</span></code> has a icon and a status message below it, that shows the runtime status of the <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<p>By double-clicking on a <code class="docutils literal notranslate"><span class="pre">node</span></code>, the user will have access to its <em>Properties</em>, <em>Description</em> and <em>Appearance</em> - each one will be a tab in the dialog box. Users may also disable a <code class="docutils literal notranslate"><span class="pre">node</span></code> by clicking the button at the bottom of the dialog box.</p>
<p><code class="docutils literal notranslate"><span class="pre">Messages</span></code> are JavaScript objects and can have any set of properties. <code class="docutils literal notranslate"><span class="pre">Messages</span></code> are the units that pass between <code class="docutils literal notranslate"><span class="pre">Nodes</span></code> when a <code class="docutils literal notranslate"><span class="pre">Flow</span></code> is working.</p>
<p>The most used property of a <code class="docutils literal notranslate"><span class="pre">Message</span></code> is its <em>payload</em> - represented by <code class="docutils literal notranslate"><span class="pre">msg.payload</span></code> inside the workspace. This is the default property to pass data between <code class="docutils literal notranslate"><span class="pre">Nodes</span></code>, but the user is free to create their own properties that most fit their needs. All JavaScript value types are accepted.</p>
<p>When working with JSON strings, it must be first converted into a JavaScript object before its content can be accessed.</p>
<p>For further details on <code class="docutils literal notranslate"><span class="pre">Messages</span></code>, please refer to <strong>Node_RED</strong>’s page on the topic: <a class="reference external" href="https://nodered.org/docs/user-guide/messages">https://nodered.org/docs/user-guide/messages</a>.</p>
</div>
<div class="section" id="openflow-and-openrpa-nodes">
<h2><span class="section-number">4.5. </span><strong>OpenFlow and OpenRPA Nodes</strong><a class="headerlink" href="#openflow-and-openrpa-nodes" title="Permalink to this headline">¶</a></h2>
<p>The following nodes are dedicated to the integration of <strong>Node-RED</strong> to <strong>OpenFlow</strong> and <strong>OpenRPA</strong>.</p>
<div class="section" id="rpa-detector">
<h3><span class="section-number">4.5.1. </span>RPA Detector<a class="headerlink" href="#rpa-detector" title="Permalink to this headline">¶</a></h3>
<p>This node is responsible for invoking a <code class="docutils literal notranslate"><span class="pre">Detector</span></code> previously created in <strong>OpenRPA</strong>. Once deployed, the <code class="docutils literal notranslate"><span class="pre">RPA</span> <span class="pre">Detector</span></code> will be active even if the <strong>Node-RED</strong> editor is closed (since the server is still running). Connect the output end of this node to a <strong>RPA Workflow</strong> node to invoke a workflow upon triggering the detector.</p>
<p>Properties:</p>
<p><code class="docutils literal notranslate"><span class="pre">Detector</span></code> - the <strong>OpenRPA</strong> Detector that will be deployed in this <code class="docutils literal notranslate"><span class="pre">flow</span></code>. A list of all available <code class="docutils literal notranslate"><span class="pre">Detectors</span></code> will be presented to the user.</p>
<p><code class="docutils literal notranslate"><span class="pre">Name</span></code> - Display name of the <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
</div>
<div class="section" id="rpa-workflow">
<h3><span class="section-number">4.5.2. </span>RPA Workflow<a class="headerlink" href="#rpa-workflow" title="Permalink to this headline">¶</a></h3>
<p>This node is responsible for invoking an <strong>OpenRPA</strong> workflow remotely.</p>
<p>There are three output ports for this <code class="docutils literal notranslate"><span class="pre">node</span></code>. The first one is named <em>completed</em> and outputs the message from the <strong>OpenRPA</strong> robot if its execution succeeded. The second one is named <em>status</em> and outputs the status of the robot while executing. Finally, the third one is named <em>failed</em> and outputs the error message returned by the robot in case its execution failed.</p>
<p>Properties:</p>
<p><code class="docutils literal notranslate"><span class="pre">Robot</span></code> - The robot to which the <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> belongs. It corresponds to <strong>OpenRPA</strong>’s <code class="docutils literal notranslate"><span class="pre">Projects</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Workflow</span></code> - The name of the <code class="docutils literal notranslate"><span class="pre">Worflow</span></code> to be invoked. A list will be presented with all the available <code class="docutils literal notranslate"><span class="pre">workflows</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Local</span> <span class="pre">queue</span> <span class="pre">name</span></code> - Name of the queue that will be created inside <strong>RabbitMQ</strong> for “robot agents” to consume from.</p>
<p><code class="docutils literal notranslate"><span class="pre">Name</span></code> - Display name of the <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
</div>
<div class="section" id="smtpserver-in">
<h3><span class="section-number">4.5.3. </span>SMTPServer In<a class="headerlink" href="#smtpserver-in" title="Permalink to this headline">¶</a></h3>
<p>Coming soon - Work in progress</p>
</div>
<div class="section" id="workflow-in">
<h3><span class="section-number">4.5.4. </span>Workflow In<a class="headerlink" href="#workflow-in" title="Permalink to this headline">¶</a></h3>
<p>This node creates a new <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> in <strong>OpenFlow</strong> - visible in the <a class="reference external" href="http://demo.openiap.io/#/Workflows">Workflows page</a> (<code class="docutils literal notranslate"><span class="pre">http://demo.openiap.io/#/Workflows</span></code>) or in the “Workflows” page set in your <strong>OpenFlow instance</strong> (usually <code class="docutils literal notranslate"><span class="pre">/#/Workflows</span></code>).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> created can have an execution chain that starts with this node. By wiring a <strong>RPA Workflow</strong> node to this one, it is possible to execute <code class="docutils literal notranslate"><span class="pre">RPA</span> <span class="pre">Workflows</span></code>.</p>
<p>The workflow can also be invoked by clicking the “Invoke” button inside the “Workflows” page or by creating an instance of it by using the <code class="docutils literal notranslate"><span class="pre">Assign</span></code> in Node-RED node or the <strong>Assign OpenFlow</strong> activity inside <strong>OpenRPA</strong>.</p>
<p>Properties:</p>
<p><code class="docutils literal notranslate"><span class="pre">Queue</span> <span class="pre">name</span></code> - Name of the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> when accessed via <strong>OpenFlow</strong>.</p>
<p><code class="docutils literal notranslate"><span class="pre">RPA</span></code> - This option allows the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> to be invoked by a <strong>OpenRPA</strong> robot or not.</p>
<p><code class="docutils literal notranslate"><span class="pre">WEB</span></code> - This option allows the <code class="docutils literal notranslate"><span class="pre">workflow</span></code> to be invoked via web (that is, via <strong>OpenFlow</strong> server) or not.</p>
<p><code class="docutils literal notranslate"><span class="pre">Name</span></code> - Display name of the <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
</div>
<div class="section" id="workflow-out">
<h3><span class="section-number">4.5.5. </span>Workflow Out<a class="headerlink" href="#workflow-out" title="Permalink to this headline">¶</a></h3>
<p>This <code class="docutils literal notranslate"><span class="pre">node</span></code> represents the output of a <code class="docutils literal notranslate"><span class="pre">Workflow</span></code> created with the <code class="docutils literal notranslate"><span class="pre">Workflow</span> <span class="pre">In</span></code> node. It also allows for the user to define a <strong>OpenFlow Form</strong> - more on that in the <a class="reference internal" href="openflow.html#id7"><span class="std std-ref">forms</span></a> section - which allows the user to insert input data and can be chained to other <code class="docutils literal notranslate"><span class="pre">Workflows</span></code>.</p>
<p>Properties:</p>
<p><code class="docutils literal notranslate"><span class="pre">State</span></code> - There are three options here: <em>idle</em>, <em>completed</em> and <em>failed</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Userform</span></code> - Defines a form for gathering user input data.</p>
<p><code class="docutils literal notranslate"><span class="pre">Name</span></code> - Display name of the <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
</div>
</div>
<div class="section" id="flow-examples">
<h2><span class="section-number">4.6. </span><strong>Flow Examples</strong><a class="headerlink" href="#flow-examples" title="Permalink to this headline">¶</a></h2>
<p>Coming soon - Work in progress</p>
<div class="section" id="dummy-integration-openrpa-openflow-nodered">
<h3><span class="section-number">4.6.1. </span>Dummy Integration OpenRPA-OpenFlow-NodeRED<a class="headerlink" href="#dummy-integration-openrpa-openflow-nodered" title="Permalink to this headline">¶</a></h3>
<p>Coming soon - Work in progress</p>
</div>
<div class="section" id="using-openflow-forms">
<h3><span class="section-number">4.6.2. </span>Using OpenFlow Forms<a class="headerlink" href="#using-openflow-forms" title="Permalink to this headline">¶</a></h3>
<p>Coming soon - Work in progress</p>
</div>
<div class="section" id="ai-image-recognition">
<h3><span class="section-number">4.6.3. </span>AI Image Recognition<a class="headerlink" href="#ai-image-recognition" title="Permalink to this headline">¶</a></h3>
<p>Coming soon - Work in progress</p>
</div>
<div class="section" id="email-receive-send">
<h3><span class="section-number">4.6.4. </span>Email Receive, Send<a class="headerlink" href="#email-receive-send" title="Permalink to this headline">¶</a></h3>
<p>There are two available nodes for working with e-mails, both are named “email”. The difference between them is the presence of output in the first and the presence of input in the second. For clarity purposes, in this example the first node will be called “email watcher” and the second “email sender”.</p>
<p>In this example, a simple system will be built for receiving and redireting e-mails according to their content.</p>
<div class="section" id="receive-e-mails">
<h4><span class="section-number">4.6.4.1. </span>Receive e-mails<a class="headerlink" href="#receive-e-mails" title="Permalink to this headline">¶</a></h4>
<p>The first step is to set an “email watcher”, that is, the node that will repeatedly search for new e-mails from an IMAP server and forward them as messages. This is why this node only has an output. The configurations of this node are quite intuitive and self-explanatory, but it is important to highlight some of its features.</p>
<p>The user will have to provide the e-mail ID and password so that the e-mail service can be accessed. It is also important to remark that the “Disposition” parameter, if set to “None”, will cause the node to constantly send messages about the same e-mails, since the it searches for unread e-mails. So, it is recommended to set this parameter to “Mark Read”. For the “Port” parameter, users can use the one that is suggested (993).</p>
<div class="figure align-center">
<img alt="images/emailin_node.png" src="images/emailin_node.png" />
</div>
<p>It is important to remark that some e-mail services will not provide access to the the e-mail account from this type of application. So, it is necessary to enable less secure apps to access. In this example, a Gmail account was used. In order to grant permission in Gmail, the user will have to click on “Manage your Google Account” by clicking on the avatar on the top left of the screen. A new tab will open and the user will click on “Security”. One of the options will be “Enable less secure apps”. After the user has enabled this type of apps, the <code class="docutils literal notranslate"><span class="pre">Email</span></code> watcher node will be able to access the selected Inbox.</p>
</div>
<div class="section" id="redirecting-e-mails">
<h4><span class="section-number">4.6.4.2. </span>Redirecting e-mails<a class="headerlink" href="#redirecting-e-mails" title="Permalink to this headline">¶</a></h4>
<p>A “switch” node was employed to filter the messages and multiple properties of the messages could be set as parameter for the filtering. The most common property is <code class="docutils literal notranslate"><span class="pre">msg.payload</span></code>, that corresponds to the body of the e-mail. It would be possible to check if it contained certain keywords or not.</p>
<p>Users could also employ other properties, such as <code class="docutils literal notranslate"><span class="pre">msg.date</span></code> (that returns the date and time the e-mail was sent), <code class="docutils literal notranslate"><span class="pre">msg.from</span></code> (that returns the e-mail address of the sender) and others.</p>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">msg.date</span></code> was used to postpone redirecting e-mails sent during the weekend using a <code class="docutils literal notranslate"><span class="pre">Delay</span></code> node, for instance, to the next Monday. The “filters” used are <code class="docutils literal notranslate"><span class="pre">switch</span></code> nodes that actually perform the redirecting.</p>
<div class="figure align-center">
<img alt="images/email_complete.png" src="images/email_complete.png" />
</div>
</div>
<div class="section" id="send-e-mails">
<h4><span class="section-number">4.6.4.3. </span>Send e-mails<a class="headerlink" href="#send-e-mails" title="Permalink to this headline">¶</a></h4>
<p>In order to send e-mails, users can employ the other <code class="docutils literal notranslate"><span class="pre">Email</span></code> node (the “email sender”). This is the node with the input, that is, it will recieve a message and send it to the selected address.</p>
<p>It is also necessary to provide an e-mail address and password of the sender, so that the application can send the e-mail from the selected account. In this example, the account as the “e-mail watcher” was used, but another account could be used here. It means that once the new e-mail was found and was sent as message in the flow, there is no necessary relation to the original account - it could be sent via another account.</p>
<div class="figure align-center">
<img alt="images/emailout_node.png" src="images/emailout_node.png" />
</div>
</div>
</div>
<div class="section" id="creating-a-http-endpoint">
<h3><span class="section-number">4.6.5. </span>Creating a HTTP endpoint<a class="headerlink" href="#creating-a-http-endpoint" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>API’s basic strtucture</p></li>
<li><p>Creating a database and adding new items to it</p></li>
<li><p>Get a full list of items</p></li>
</ol>
<div class="section" id="api-s-basic-strtucture">
<h4><span class="section-number">4.6.5.1. </span>API’s basic strtucture<a class="headerlink" href="#api-s-basic-strtucture" title="Permalink to this headline">¶</a></h4>
<p>In order to create a new HTTP endpoint in <strong>Node-RED</strong>, only two nodes are required: <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">In</span></code> and <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">Request</span></code>. These two nodes must necessarily be connected, and other nodes will be added to this structure so that the API will execute the actions properly.</p>
<p>The user will, then, drag these two nodes into the <code class="docutils literal notranslate"><span class="pre">Workspace</span></code> and connected them. These two nodes will be required for each endpoint of the API. Let’s assume this first endpoint will display a webpage with all available endpoint within the domain.</p>
<p>To add a HTML page, the user will add a new <code class="docutils literal notranslate"><span class="pre">Template</span></code> node between the two nodes already created. In this node’s Properties, the user will have to change the field “Syntax Highlight” to HTML. After that, the users can create their own homepage for the API using HTML.</p>
<p>The first node (<code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">In</span></code>) must be configured before deploying the flow. In its configurations, users will find three fields: Method, URL and Name. For this homepage, the method used will be “GET” and the URL will be “/homepage”.</p>
<div class="figure align-center">
<img alt="images/httpendpoint-1.png" src="images/httpendpoint-1.png" />
</div>
</div>
<div class="section" id="creating-a-database-and-adding-new-items-to-it">
<h4><span class="section-number">4.6.5.2. </span>Creating a database and adding new items to it<a class="headerlink" href="#creating-a-database-and-adding-new-items-to-it" title="Permalink to this headline">¶</a></h4>
<p>The new database will be created once the user adds new items to it. The user, then, will create a new endpoint (that is, a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">In</span></code> and a <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">Response</span></code> node connected one to the other) that is able to receive information and add it to a database in MongoDB. Besides these two nodes, it will also be necessary to add a <code class="docutils literal notranslate"><span class="pre">add</span></code> node, from the <em>api</em> category in the pallete.</p>
<p>After that, the user will have to configure the <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">In</span></code> node. Since the required action here is to add a new item to the database, the method of this endpoint will be “POST”. It is also necessary to set a URL. In this example, “/newuser”.</p>
<p>The last step is to configure the <code class="docutils literal notranslate"><span class="pre">add</span></code> node. User will find seven fields here: Type, Collection, Entity from, Result to, Write Concern, Journal, Name. A full description of the nodes in this category will be provided at <a class="reference internal" href="#mongodb-entities"><span class="std std-ref">MongoDB Entities</span></a>. For this example, it will be necessary only to fill in the name of collection (again, if it does not exist yet, it will be created automatically), the correct input (‘Entity from’) and output (‘Result to’).</p>
<p>To test the API, it is possible to use any API tester. The request must follow the same method as specified in the configuration of the node, that is, “POST”. The body of the request must be in JSON format, since it will be added to the a MongoDB database. If the response was “200”, it means that the API is working.</p>
<div class="figure align-center">
<img alt="images/httpendpoint-2.png" src="images/httpendpoint-2.png" />
</div>
</div>
<div class="section" id="get-a-full-list-of-items">
<h4><span class="section-number">4.6.5.3. </span>Get a full list of items<a class="headerlink" href="#get-a-full-list-of-items" title="Permalink to this headline">¶</a></h4>
<p>For the last endpoint of this API, a list of all items will be retrieved. The design of the flow will be the same, that is, one <code class="docutils literal notranslate"><span class="pre">http</span> <span class="pre">in</span></code> node, one <code class="docutils literal notranslate"><span class="pre">get</span></code> (instead of <code class="docutils literal notranslate"><span class="pre">add</span></code>) and one <code class="docutils literal notranslate"><span class="pre">http</span> <span class="pre">response</span></code> node.</p>
<p>The method of the <code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">In</span></code> node must be set to “GET” in this case. The URL used in the example is “/listusers”.</p>
<p>After that, the users must configure the <code class="docutils literal notranslate"><span class="pre">get</span></code> node. In order to get a full list of users, the “Query” field must be left blank. If needed, users can specify what information will be retrieved by this endpoint by setting the “Query” field to return the desired information. After that, the user must type the name of the collection.</p>
<div class="figure align-center">
<img alt="images/httpendpoint-3.png" src="images/httpendpoint-3.png" />
</div>
</div>
</div>
<div class="section" id="excel-read">
<h3><span class="section-number">4.6.6. </span>Excel Read<a class="headerlink" href="#excel-read" title="Permalink to this headline">¶</a></h3>
<p>Coming soon - Work in progress</p>
</div>
<div class="section" id="mongodb-entities">
<h3><span class="section-number">4.6.7. </span>MongoDB Entities<a class="headerlink" href="#mongodb-entities" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="appendix_a.html" class="btn btn-neutral float-right" title="5. Appendix A" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="openrpa.html" class="btn btn-neutral float-left" title="3. OpenRPA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Thiago Pestitschek, Diego Thijssen, Tiago Bentivoglio, Paulo Veras

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p>Powered by <a href="https://bpatechnologies.com/">BPA Technologies</a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
        <h4>>Powered by BPA Technologies - bpatechnologies.com</h4>


</body>
</html>